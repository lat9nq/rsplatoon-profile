var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,a;function l(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function u(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function d(t,e,n){t.$$.on_destroy.push(u(e,n))}function h(t,e,n,o){if(t){const i=p(t,e,n,o);return t[0](i)}}function p(t,n,o,i){return t[1]&&i?e(o.ctx.slice(),t[1](i(n))):o.ctx}function f(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}function m(t,e,n,o,i,r){if(i){const s=p(e,n,o,r);t.p(s,i)}}function g(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function v(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function y(e){return e&&r(e.destroy)?e.destroy:t}function b(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function M(t){return document.createTextNode(t)}function _(){return M(" ")}function C(){return M("")}function L(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function I(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function T(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function j(t){a=t}function A(){if(!a)throw new Error("Function called outside component initialization");return a}function N(t){A().$$.on_mount.push(t)}function O(t,e){A().$$.context.set(t,e)}function P(t){return A().$$.context.get(t)}const F=[],R=[],U=[],D=[],H=Promise.resolve();let W=!1;function Q(t){U.push(t)}const K=new Set;let B=0;function z(){const t=a;do{for(;B<F.length;){const t=F[B];B++,j(t),Y(t.$$)}for(j(null),F.length=0,B=0;R.length;)R.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];K.has(e)||(K.add(e),e())}U.length=0}while(F.length);for(;D.length;)D.pop()();W=!1,K.clear(),j(t)}function Y(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}const J=new Set;let q;function G(){q={r:0,c:[],p:q}}function V(){q.r||i(q.c),q=q.p}function X(t,e){t&&t.i&&(J.delete(t),t.i(e))}function Z(t,e,n,o){if(t&&t.o){if(J.has(t))return;J.add(t),q.c.push((()=>{J.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function tt(t){return"object"==typeof t&&null!==t?t:{}}function et(t){t&&t.c()}function nt(t,e,o,s){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,o),s||Q((()=>{const e=a.map(n).filter(r);l?l.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(Q)}function ot(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(F.push(t),W||(W=!0,H.then(z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(e,n,r,s,c,l,u,d=[-1]){const h=a;j(e);const p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||h.$$.root};u&&u(p.root);let f=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),f&&it(e,t)),n})):[],p.update(),f=!0,i(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(x)}else p.fragment&&p.fragment.c();n.intro&&X(e.$$.fragment),nt(e,n.target,n.anchor,n.customElement),z()}j(h)}class st{$destroy(){ot(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ct=[];function at(e,n=t){let o;const i=new Set;function r(t){if(s(e,t)&&(e=t,o)){const t=!ct.length;for(const t of i)t[1](),ct.push(t,e);if(t){for(let t=0;t<ct.length;t+=2)ct[t][0](ct[t+1]);ct.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(s,c=t){const a=[s,c];return i.add(a),1===i.size&&(o=n(r)||t),s(e),()=>{i.delete(a),0===i.size&&(o(),o=null)}}}}function lt(e,n,o){const s=!Array.isArray(e),c=s?[e]:e,a=n.length<2;return l=e=>{let o=!1;const l=[];let d=0,h=t;const p=()=>{if(d)return;h();const o=n(s?l[0]:l,e);a?e(o):h=r(o)?o:t},f=c.map(((t,e)=>u(t,(t=>{l[e]=t,d&=~(1<<e),o&&p()}),(()=>{d|=1<<e}))));return o=!0,p(),function(){i(f),h()}},{subscribe:at(o,l).subscribe};var l}const ut={},dt={};function ht(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const pt=function(t,e){const n=[];let o=ht(t);return{get location(){return o},listen(e){n.push(e);const i=()=>{o=ht(t),e({location:o,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const o=n.indexOf(e);n.splice(o,1)}},navigate(e,{state:i,replace:r=!1}={}){i={...i,key:Date.now()+""};try{r?t.history.replaceState(i,null,e):t.history.pushState(i,null,e)}catch(n){t.location[r?"replace":"assign"](e)}o=ht(t),n.forEach((t=>t({location:o,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],o=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return o[e]},pushState(t,i,r){const[s,c=""]=r.split("?");e++,n.push({pathname:s,search:c}),o.push(t)},replaceState(t,i,r){const[s,c=""]=r.split("?");n[e]={pathname:s,search:c},o[e]=t}}}}()),{navigate:ft}=pt,mt=/^:(.+)/;function gt(t){return"*"===t[0]}function vt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function yt(t){return t.replace(/(^\/+|\/+$)/g,"")}function bt(t,e){return{route:t,score:t.default?0:vt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return mt.test(t)}(e)?gt(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function wt(t,e){let n,o;const[i]=e.split("?"),r=vt(i),s=""===r[0],c=function(t){return t.map(bt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,i=c.length;t<i;t++){const i=c[t].route;let a=!1;if(i.default){o={route:i,params:{},uri:e};continue}const l=vt(i.path),u={},d=Math.max(r.length,l.length);let h=0;for(;h<d;h++){const t=l[h],e=r[h];if(void 0!==t&&gt(t)){u["*"===t?"*":t.slice(1)]=r.slice(h).map(decodeURIComponent).join("/");break}if(void 0===e){a=!0;break}let n=mt.exec(t);if(n&&!s){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){a=!0;break}}if(!a){n={route:i,params:u,uri:"/"+r.slice(0,h).join("/")};break}}return n||o||null}function xt(t,e){return`${yt("/"===e?t:`${yt(t)}/${yt(e)}`)}/`}function $t(t){let e;const n=t[9].default,o=h(n,t,t[8],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[i]){o&&o.p&&(!e||256&i)&&m(o,n,t,t[8],e?f(n,t[8],i,null):g(t[8]),null)},i(t){e||(X(o,t),e=!0)},o(t){Z(o,t),e=!1},d(t){o&&o.d(t)}}}function kt(t,e,n){let o,i,r,{$$slots:s={},$$scope:c}=e,{basepath:a="/"}=e,{url:l=null}=e;const u=P(ut),h=P(dt),p=at([]);d(t,p,(t=>n(6,i=t)));const f=at(null);let m=!1;const g=u||at(l?{pathname:l}:pt.location);d(t,g,(t=>n(5,o=t)));const v=h?h.routerBase:at({path:a,uri:a});d(t,v,(t=>n(7,r=t)));const y=lt([v,f],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:o,uri:i}=e;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:i}}));return u||(N((()=>pt.listen((t=>{g.set(t.location)})))),O(ut,g)),O(dt,{activeRoute:f,base:v,routerBase:y,registerRoute:function(t){const{path:e}=r;let{path:n}=t;if(t._path=n,t.path=xt(e,n),"undefined"==typeof window){if(m)return;const e=function(t,e){return wt([t],e)}(t,o.pathname);e&&(f.set(e),m=!0)}else p.update((e=>(e.push(t),e)))},unregisterRoute:function(t){p.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),t.$$set=t=>{"basepath"in t&&n(3,a=t.basepath),"url"in t&&n(4,l=t.url),"$$scope"in t&&n(8,c=t.$$scope)},t.$$.update=()=>{if(128&t.$$.dirty){const{path:t}=r;p.update((e=>(e.forEach((e=>e.path=xt(t,e._path))),e)))}if(96&t.$$.dirty){const t=wt(i,o.pathname);f.set(t)}},[p,g,v,a,l,o,i,r,c,s]}class Mt extends st{constructor(t){super(),rt(this,t,kt,$t,s,{basepath:3,url:4})}}const _t=t=>({params:4&t,location:16&t}),Ct=t=>({params:t[2],location:t[4]});function Lt(t){let e,n,o,i;const r=[St,It],s=[];function c(t,e){return null!==t[0]?0:1}return e=c(t),n=s[e]=r[e](t),{c(){n.c(),o=C()},m(t,n){s[e].m(t,n),w(t,o,n),i=!0},p(t,i){let a=e;e=c(t),e===a?s[e].p(t,i):(G(),Z(s[a],1,1,(()=>{s[a]=null})),V(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),X(n,1),n.m(o.parentNode,o))},i(t){i||(X(n),i=!0)},o(t){Z(n),i=!1},d(t){s[e].d(t),t&&x(o)}}}function It(t){let e;const n=t[10].default,o=h(n,t,t[9],Ct);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,i){o&&o.p&&(!e||532&i)&&m(o,n,t,t[9],e?f(n,t[9],i,_t):g(t[9]),Ct)},i(t){e||(X(o,t),e=!0)},o(t){Z(o,t),e=!1},d(t){o&&o.d(t)}}}function St(t){let n,o,i;const r=[{location:t[4]},t[2],t[3]];var s=t[0];function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return s&&(n=new s(c())),{c(){n&&et(n.$$.fragment),o=C()},m(t,e){n&&nt(n,t,e),w(t,o,e),i=!0},p(t,e){const i=28&e?function(t,e){const n={},o={},i={$$scope:1};let r=t.length;for(;r--;){const s=t[r],c=e[r];if(c){for(const t in s)t in c||(o[t]=1);for(const t in c)i[t]||(n[t]=c[t],i[t]=1);t[r]=c}else for(const t in s)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(r,[16&e&&{location:t[4]},4&e&&tt(t[2]),8&e&&tt(t[3])]):{};if(s!==(s=t[0])){if(n){G();const t=n;Z(t.$$.fragment,1,0,(()=>{ot(t,1)})),V()}s?(n=new s(c()),et(n.$$.fragment),X(n.$$.fragment,1),nt(n,o.parentNode,o)):n=null}else s&&n.$set(i)},i(t){i||(n&&X(n.$$.fragment,t),i=!0)},o(t){n&&Z(n.$$.fragment,t),i=!1},d(t){t&&x(o),n&&ot(n,t)}}}function Et(t){let e,n,o=null!==t[1]&&t[1].route===t[7]&&Lt(t);return{c(){o&&o.c(),e=C()},m(t,i){o&&o.m(t,i),w(t,e,i),n=!0},p(t,[n]){null!==t[1]&&t[1].route===t[7]?o?(o.p(t,n),2&n&&X(o,1)):(o=Lt(t),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(G(),Z(o,1,1,(()=>{o=null})),V())},i(t){n||(X(o),n=!0)},o(t){Z(o),n=!1},d(t){o&&o.d(t),t&&x(e)}}}function Tt(t,n,o){let i,r,{$$slots:s={},$$scope:c}=n,{path:a=""}=n,{component:l=null}=n;const{registerRoute:u,unregisterRoute:h,activeRoute:p}=P(dt);d(t,p,(t=>o(1,i=t)));const f=P(ut);d(t,f,(t=>o(4,r=t)));const m={path:a,default:""===a};let g={},y={};var b;return u(m),"undefined"!=typeof window&&(b=()=>{h(m)},A().$$.on_destroy.push(b)),t.$$set=t=>{o(13,n=e(e({},n),v(t))),"path"in t&&o(8,a=t.path),"component"in t&&o(0,l=t.component),"$$scope"in t&&o(9,c=t.$$scope)},t.$$.update=()=>{2&t.$$.dirty&&i&&i.route===m&&o(2,g=i.params);{const{path:t,component:e,...i}=n;o(3,y=i)}},n=v(n),[l,i,g,y,r,p,f,m,a,c,s]}class jt extends st{constructor(t){super(),rt(this,t,Tt,Et,s,{path:8,component:0})}}function At(t){function e(t){const e=t.currentTarget;""===e.target&&function(t){const e=location.host;return t.host==e||0===t.href.indexOf(`https://${e}`)||0===t.href.indexOf(`http://${e}`)}(e)&&function(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)&&(t.preventDefault(),ft(e.pathname+e.search,{replace:e.hasAttribute("replace")}))}return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}function Nt(t){let e,n,o,i;return{c(){e=k("div"),n=k("a"),o=k("button"),o.textContent="Discord Login",I(o,"class","btn btn-primary"),I(o,"type","button"),I(n,"id","loginDiscord"),I(n,"href",i=t[0].loginUrl),I(e,"class","nameentry needtologin")},m(t,i){w(t,e,i),b(e,n),b(n,o)},p(t,e){1&e&&i!==(i=t[0].loginUrl)&&I(n,"href",i)},d(t){t&&x(e)}}}function Ot(t){let e,n,o,r,s,c,a,l,u,d,h,p,f,m,g,v,y,$,C,j,A,N,O,P,F,R,U,D,H,W,Q,K,B,z=(t[2]?t[2].name:"Splatoon 3 Blue on Yellow")+"",Y=t[0].profileId&&Pt(t);function J(t,e){return t[0].drip?Rt:Ft}let q=J(t),G=q(t),V=t[2]&&Ut(t);return{c(){e=k("div"),n=k("div"),o=k("div"),Y&&Y.c(),r=_(),s=k("div"),c=k("div"),G.c(),a=_(),l=k("div"),u=k("form"),d=k("div"),h=k("h3"),h.textContent="Username",p=_(),f=k("input"),m=_(),g=k("h3"),g.textContent="Friend Code",v=_(),y=k("input"),$=_(),C=k("div"),j=k("div"),j.innerHTML='<div class="col"><h3 for="template">Card Template</h3></div>',A=_(),N=k("div"),O=k("div"),P=k("button"),F=M(z),R=_(),U=k("input"),H=_(),V&&V.c(),W=_(),Q=k("button"),Q.textContent="Save",I(o,"class","col"),I(n,"class","row"),T(n,"margin-bottom","14px"),I(c,"class","col-12 col-md-6"),I(h,"for","name"),I(f,"type","text"),I(f,"class","form-control"),I(f,"name","name"),I(f,"id","name"),I(f,"placeholder","In game name"),I(f,"maxlength","10"),I(g,"for","friendcode"),I(y,"type","text"),I(y,"class","form-control"),I(y,"name","friendcode"),I(y,"id","friendcode"),I(y,"placeholder","0000-0000-0000"),I(j,"class","row"),I(P,"type","button"),T(P,"width","100%"),I(P,"class","btn btn-primary"),I(U,"type","hidden"),U.value=D=t[2]?t[2].id:"s3-yellow-indigo",I(U,"name","template"),I(O,"class","col-12"),I(N,"class","row"),I(C,"class",""),I(Q,"id","submit"),I(Q,"type","submit"),I(Q,"class","btn btn-primary"),I(d,"class","form-group"),I(u,"action","/api/save"),I(u,"method","post"),I(u,"id","save-form"),I(l,"class","col-12 col-md-6"),I(s,"class","row"),I(e,"class","container")},m(i,x){w(i,e,x),b(e,n),b(n,o),Y&&Y.m(o,null),b(e,r),b(e,s),b(s,c),G.m(c,null),b(s,a),b(s,l),b(l,u),b(u,d),b(d,h),b(d,p),b(d,f),E(f,t[0].name),b(d,m),b(d,g),b(d,v),b(d,y),E(y,t[0].friendCode),b(d,$),b(d,C),b(C,j),b(C,A),b(C,N),b(N,O),b(O,P),b(P,F),b(O,R),b(O,U),b(O,H),V&&V.m(O,null),b(d,W),b(d,Q),K||(B=[L(f,"input",t[7]),L(y,"input",t[8]),L(P,"click",t[3])],K=!0)},p(t,e){t[0].profileId?Y?Y.p(t,e):(Y=Pt(t),Y.c(),Y.m(o,null)):Y&&(Y.d(1),Y=null),q===(q=J(t))&&G?G.p(t,e):(G.d(1),G=q(t),G&&(G.c(),G.m(c,null))),1&e&&f.value!==t[0].name&&E(f,t[0].name),1&e&&y.value!==t[0].friendCode&&E(y,t[0].friendCode),4&e&&z!==(z=(t[2]?t[2].name:"Splatoon 3 Blue on Yellow")+"")&&S(F,z),4&e&&D!==(D=t[2]?t[2].id:"s3-yellow-indigo")&&(U.value=D),t[2]?V?V.p(t,e):(V=Ut(t),V.c(),V.m(O,null)):V&&(V.d(1),V=null)},d(t){t&&x(e),Y&&Y.d(),G.d(),V&&V.d(),K=!1,i(B)}}}function Pt(t){let e,n,o,i,r,s,c,a,l,u;return{c(){e=k("form"),n=k("label"),n.textContent="Your Profile Link",o=_(),i=k("div"),r=k("input"),c=_(),a=k("span"),a.innerHTML='<button class="btn btn-default" type="button" id="copy-button" data-toggle="tooltip" data-placement="button" title="Copy to Clipboard"><i class="fa fa-copy"></i></button>',I(n,"for","copy-input"),I(r,"type","text"),I(r,"class","form-control"),r.value=s=t[0].baseUrl+"/p/"+t[0].profileId+"?_v="+(new Date).valueOf(),I(r,"id","copy-input"),r.readOnly=!0,I(a,"class","input-group-btn"),I(i,"class","input-group")},m(s,d){w(s,e,d),b(e,n),b(e,o),b(e,i),b(i,r),t[6](r),b(i,c),b(i,a),l||(u=L(i,"click",t[4]),l=!0)},p(t,e){1&e&&s!==(s=t[0].baseUrl+"/p/"+t[0].profileId+"?_v="+(new Date).valueOf())&&r.value!==s&&(r.value=s)},d(n){n&&x(e),t[6](null),l=!1,u()}}}function Ft(e){let n,o,i,r;return{c(){n=k("div"),n.innerHTML='<h3>No drip</h3> \n                        <a class="btn btn-primary edit-drip" href="/drip" role="button">Edit</a>',o=_(),i=k("img"),l(i.src,r="/css/img/nodrip.png")||I(i,"src","/css/img/nodrip.png"),I(i,"class","drip-pic"),I(i,"alt","drip")},m(t,e){w(t,n,e),w(t,o,e),w(t,i,e)},p:t,d(t){t&&x(n),t&&x(o),t&&x(i)}}}function Rt(t){let e,n,o,i;return{c(){e=k("div"),e.innerHTML='<h3>Your drip</h3> \n                        <a class="btn btn-primary edit-drip" href="/drip" role="button">Edit</a>',n=_(),o=k("img"),l(o.src,i=t[0].drip)||I(o,"src",i),I(o,"class","drip-pic"),I(o,"alt","drip")},m(t,i){w(t,e,i),w(t,n,i),w(t,o,i)},p(t,e){1&e&&!l(o.src,i=t[0].drip)&&I(o,"src",i)},d(t){t&&x(e),t&&x(n),t&&x(o)}}}function Ut(t){let e,n;return{c(){e=k("img"),l(e.src,n=t[2].url)||I(e,"src",n),T(e,"width","100%"),I(e,"id","templateimage"),I(e,"alt","template")},m(t,n){w(t,e,n)},p(t,o){4&o&&!l(e.src,n=t[2].url)&&I(e,"src",n)},d(t){t&&x(e)}}}function Dt(e){let n;function o(t,e){return t[0].id?Ot:Nt}let i=o(e),r=i(e);return{c(){n=k("div"),r.c()},m(t,e){w(t,n,e),r.m(n,null)},p(t,[e]){i===(i=o(t))&&r?r.p(t,e):(r.d(1),r=i(t),r&&(r.c(),r.m(n,null)))},i:t,o:t,d(t){t&&x(n),r.d()}}}function Ht(t,e,n){let o,i,{userdata:r={}}=e,{location:s=""}=e,c=[];var a;return N((async()=>{if(c=await(async()=>(await fetch("/api/templates/all")).json())(),r&&r.template&&c&&c.length>0){let t=c.filter((t=>t.id===r.template));1===t.length?n(2,i=t[0]):n(2,i=c.filter((t=>"s3-yellow-indigo"===t.id))[0])}else n(2,i=c.filter((t=>"s3-yellow-indigo"===t.id))[0]);jQuery("#save-form").on("submit",(function(){jQuery("#submit").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>  Loading...')}))})),a=()=>{if(n(0,r.friendCode=function(t=""){t=t.replace(/[^0-9]/g,"");let e="";for(let n=0;n<t.length&&12!==n;n++)4!==n&&8!==n||(e+="-"),e+=t[n];return e}(r.friendCode),r),r&&r.template&&c&&c.length>0){let t=c.filter((t=>t.id===r.template));1===t.length?n(2,i=t[0]):n(2,i=c.filter((t=>"s3-yellow-indigo"===t.id))[0])}else n(2,i=c.filter((t=>"s3-yellow-indigo"===t.id))[0])},A().$$.before_update.push(a),t.$$set=t=>{"userdata"in t&&n(0,r=t.userdata),"location"in t&&n(5,s=t.location)},[r,o,i,function(){ft("/templates")},function(){console.log("going"),o.focus(),o.select(),document.execCommand("copy")},s,function(t){R[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(){r.name=this.value,n(0,r)},function(){r.friendCode=this.value,n(0,r)}]}class Wt extends st{constructor(t){super(),rt(this,t,Ht,Dt,s,{userdata:0,location:5})}}function Qt(e){let n,o,i,r;return{c(){n=k("div"),n.innerHTML="<h3>No drip</h3>",o=_(),i=k("img"),l(i.src,r="/css/img/nodrip.png")||I(i,"src","/css/img/nodrip.png"),I(i,"class","drip-pic"),I(i,"alt","no drip")},m(t,e){w(t,n,e),w(t,o,e),w(t,i,e)},p:t,d(t){t&&x(n),t&&x(o),t&&x(i)}}}function Kt(t){let e,n,o,i;return{c(){e=k("div"),e.innerHTML="<h3>Their drip</h3>",n=_(),o=k("img"),l(o.src,i=t[0].drip)||I(o,"src",i),I(o,"class","drip-pic"),I(o,"alt","drip")},m(t,i){w(t,e,i),w(t,n,i),w(t,o,i)},p(t,e){1&e&&!l(o.src,i=t[0].drip)&&I(o,"src",i)},d(t){t&&x(e),t&&x(n),t&&x(o)}}}function Bt(e){let n,o,i,r,s,c,a,l,u,d,h,p,f,m,g,v,y,$,C,E,j,A=(e[0].name?e[0].name:"User")+"";function N(t,e){return t[0].drip?Kt:Qt}let O=N(e),P=O(e);return{c(){n=k("div"),o=k("div"),i=k("div"),r=k("h3"),s=M(A),c=M("'s Profile"),a=_(),l=k("div"),u=k("div"),P.c(),d=_(),h=k("div"),p=k("form"),f=k("h3"),f.textContent="Friend Code",m=_(),g=k("div"),v=k("input"),$=_(),C=k("span"),C.innerHTML='<button class="btn btn-default" type="button" id="copy-button" data-toggle="tooltip" data-placement="button" title="Copy to Clipboard"><i class="fa fa-copy"></i></button>',I(i,"class","col"),I(o,"class","row"),T(o,"margin-bottom","14px"),I(u,"class","col-12 col-md-6"),I(f,"for","copy-input"),I(v,"type","text"),I(v,"class","form-control"),v.value=y=e[0].friendCode,I(v,"id","copy-input"),v.readOnly=!0,I(C,"class","input-group-btn"),I(g,"class","input-group"),I(h,"class","col-12 col-md-6"),I(l,"class","row"),T(l,"margin-bottom","14px"),I(n,"class","container")},m(t,y){w(t,n,y),b(n,o),b(o,i),b(i,r),b(r,s),b(r,c),b(n,a),b(n,l),b(l,u),P.m(u,null),b(l,d),b(l,h),b(h,p),b(p,f),b(p,m),b(p,g),b(g,v),e[5](v),b(g,$),b(g,C),E||(j=L(g,"click",e[2]),E=!0)},p(t,[e]){1&e&&A!==(A=(t[0].name?t[0].name:"User")+"")&&S(s,A),O===(O=N(t))&&P?P.p(t,e):(P.d(1),P=O(t),P&&(P.c(),P.m(u,null))),1&e&&y!==(y=t[0].friendCode)&&v.value!==y&&(v.value=y)},i:t,o:t,d(t){t&&x(n),P.d(),e[5](null),E=!1,j()}}}function zt(t,e,n){let o,{profileId:i=""}=e,{location:r=""}=e,s={};return N((async()=>{n(0,s=await(async t=>(await fetch(`/api/profile/${t}`)).json())(i))})),t.$$set=t=>{"profileId"in t&&n(3,i=t.profileId),"location"in t&&n(4,r=t.location)},[s,o,function(){console.log("going"),o.focus(),o.select(),document.execCommand("copy")},i,r,function(t){R[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class Yt extends st{constructor(t){super(),rt(this,t,zt,Bt,s,{profileId:3,location:4})}}function Jt(t,e,n){const o=t.slice();return o[19]=e[n],o[20]=e,o[21]=n,o}function qt(t){let e,n,o,i,r,s,c,a,l,u,d,h=t[0].allbots&&t[0].allbots.length&&Gt(t);return{c(){e=k("div"),e.innerHTML='<div class="col"><form action="/api/settings/grantkey" method="post" id="save-form"><div class="form-group"><div><h3 for="name">Grant bot key to another user</h3> \n                            <input type="text" class="form-control" name="name" value="" id="name" placeholder="User ID"/></div> \n                        <div class="form-check"><input class="form-check-input" type="checkbox" value="getProfile" name="permissions" style="width:auto"/> \n                            <label class="form-check-label" for="flexCheckDefault">Get Profile</label></div> \n                        <div class="form-check"><input class="form-check-input" type="checkbox" value="saveFriendCode" name="permissions" style="width:auto"/> \n                            <label class="form-check-label" for="flexCheckDefault">Save Friend Code</label></div> \n                        <div class="form-check"><input class="form-check-input" type="checkbox" value="saveUsername" name="permissions" style="width:auto"/> \n                            <label class="form-check-label" for="flexCheckDefault">Save Username</label></div> \n                        <div class="form-check"><input class="form-check-input" type="checkbox" value="saveDrip" name="permissions" style="width:auto"/> \n                            <label class="form-check-label" for="flexCheckDefault">Save Drip</label></div> \n                        <div class="form-check"><input class="form-check-input" type="checkbox" value="deleteProfile" name="permissions" style="width:auto"/> \n                            <label class="form-check-label" for="flexCheckDefault">Delete Profile</label></div> \n                        <button id="submit" type="submit" class="btn btn-primary">Save</button></div></form></div>',n=_(),o=k("div"),i=k("div"),r=k("div"),s=k("div"),c=k("div"),a=k("table"),l=k("thead"),l.innerHTML='<tr><th scope="col">User</th> \n                                        <th scope="col">Get Profile</th> \n                                        <th scope="col">Save FC</th> \n                                        <th scope="col">Save Name</th> \n                                        <th scope="col">Save Drip</th> \n                                        <th scope="col">Delete Profile</th> \n                                        <th scope="col">Team Query</th> \n                                        <th scope="col">Team Webhook</th> \n                                        <th scope="col">Revoked</th> \n                                        <th scope="col">Update</th> \n                                        <th scope="col">Reset</th> \n                                        <th scope="col">Revoke</th></tr>',u=_(),d=k("tbody"),h&&h.c(),I(e,"class","row"),I(a,"class","table table-striped"),I(c,"class","col"),I(s,"class","row no-gutters"),I(r,"class","container"),T(r,"padding","0"),I(i,"class","col"),I(o,"class","row no-gutters"),T(o,"margin-top","14px")},m(t,p){w(t,e,p),w(t,n,p),w(t,o,p),b(o,i),b(i,r),b(r,s),b(s,c),b(c,a),b(a,l),b(a,u),b(a,d),h&&h.m(d,null)},p(t,e){t[0].allbots&&t[0].allbots.length?h?h.p(t,e):(h=Gt(t),h.c(),h.m(d,null)):h&&(h.d(1),h=null)},d(t){t&&x(e),t&&x(n),t&&x(o),h&&h.d()}}}function Gt(t){let e,n=t[0].allbots,o=[];for(let e=0;e<n.length;e+=1)o[e]=Vt(Jt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);w(t,e,n)},p(t,i){if(29&i){let r;for(n=t[0].allbots,r=0;r<n.length;r+=1){const s=Jt(t,n,r);o[r]?o[r].p(s,i):(o[r]=Vt(s),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){$(o,t),t&&x(e)}}}function Vt(t){let e,n,o,r,s,c,a,l,u,d,h,p,f,m,g,v,y,$,C,E,j,A,N,O,P,F,R,U,D,H,W,Q,K,B,z,Y,J,q,G,V,X,Z,tt,et,nt,ot,it,rt,st,ct,at,lt,ut,dt,ht,pt,ft,mt,gt,vt,yt,bt,wt,xt=t[19].userId+"",$t=t[19].nobot+"";function kt(){t[7].call(p,t[20],t[21])}function Mt(){t[8].call($,t[20],t[21])}function _t(){t[9].call(O,t[20],t[21])}function Ct(){t[10].call(H,t[20],t[21])}function Lt(){t[11].call(Y,t[20],t[21])}function It(){t[12].call(Z,t[20],t[21])}function St(){t[13].call(rt,t[20],t[21])}function Et(){return t[14](t[19])}function Tt(){return t[15](t[19])}function jt(){return t[16](t[19])}return{c(){e=k("tr"),n=k("th"),o=M(xt),r=_(),s=k("input"),a=_(),l=k("td"),u=k("div"),d=k("input"),h=_(),p=k("input"),f=_(),m=k("td"),g=k("div"),v=k("input"),y=_(),$=k("input"),C=_(),E=k("td"),j=k("div"),A=k("input"),N=_(),O=k("input"),P=_(),F=k("td"),R=k("div"),U=k("input"),D=_(),H=k("input"),W=_(),Q=k("td"),K=k("div"),B=k("input"),z=_(),Y=k("input"),J=_(),q=k("td"),G=k("div"),V=k("input"),X=_(),Z=k("input"),tt=_(),et=k("td"),nt=k("div"),ot=k("input"),it=_(),rt=k("input"),st=_(),ct=k("td"),at=M($t),lt=_(),ut=k("td"),dt=k("button"),dt.innerHTML='<i class="fa fa-cloud-upload"></i>',ht=_(),pt=k("td"),ft=k("button"),ft.innerHTML='<i class="fa fa-refresh"></i>',mt=_(),gt=k("td"),vt=k("button"),vt.innerHTML='<i class="fa fa-times"></i>',yt=_(),I(s,"type","hidden"),I(s,"name","name"),s.value=c=t[19].userId,I(n,"scope","row"),I(d,"type","hidden"),I(d,"name","getProfile"),d.value="0",I(p,"class","form-check-input"),I(p,"type","checkbox"),p.__value="1",p.value=p.__value,I(p,"name","getProfile"),T(p,"width","auto"),I(u,"class","form-check"),I(v,"type","hidden"),I(v,"name","saveFriendCode"),v.value="0",I($,"class","form-check-input"),I($,"type","checkbox"),$.__value="1",$.value=$.__value,I($,"name","saveFriendCode"),T($,"width","auto"),I(g,"class","form-check"),I(A,"type","hidden"),I(A,"name","saveUsername"),A.value="0",I(O,"class","form-check-input"),I(O,"type","checkbox"),O.__value="1",O.value=O.__value,I(O,"name","saveUsername"),T(O,"width","auto"),I(j,"class","form-check"),I(U,"type","hidden"),I(U,"name","saveDrip"),U.value="0",I(H,"class","form-check-input"),I(H,"type","checkbox"),H.__value="1",H.value=H.__value,I(H,"name","saveDrip"),T(H,"width","auto"),I(R,"class","form-check"),I(B,"type","hidden"),I(B,"name","deleteProfile"),B.value="0",I(Y,"class","form-check-input"),I(Y,"type","checkbox"),Y.__value="1",Y.value=Y.__value,I(Y,"name","deleteProfile"),T(Y,"width","auto"),I(K,"class","form-check"),I(V,"type","hidden"),I(V,"name","teamQuery"),V.value="0",I(Z,"class","form-check-input"),I(Z,"type","checkbox"),Z.__value="1",Z.value=Z.__value,I(Z,"name","teamQuery"),T(Z,"width","auto"),I(G,"class","form-check"),I(ot,"type","hidden"),I(ot,"name","teamWebhook"),ot.value="0",I(rt,"class","form-check-input"),I(rt,"type","checkbox"),rt.__value="1",rt.value=rt.__value,I(rt,"name","teamWebhook"),T(rt,"width","auto"),I(nt,"class","form-check"),I(dt,"class","btn btn-primary"),I(dt,"type","button"),I(ft,"class","btn btn-primary"),I(ft,"type","button"),I(pt,"class","text-center"),I(vt,"class","btn btn-primary"),I(vt,"type","button"),I(gt,"class","text-center")},m(i,c){w(i,e,c),b(e,n),b(n,o),b(n,r),b(n,s),b(e,a),b(e,l),b(l,u),b(u,d),b(u,h),b(u,p),p.checked=t[19].getProfile,b(e,f),b(e,m),b(m,g),b(g,v),b(g,y),b(g,$),$.checked=t[19].saveFriendCode,b(e,C),b(e,E),b(E,j),b(j,A),b(j,N),b(j,O),O.checked=t[19].saveUsername,b(e,P),b(e,F),b(F,R),b(R,U),b(R,D),b(R,H),H.checked=t[19].saveDrip,b(e,W),b(e,Q),b(Q,K),b(K,B),b(K,z),b(K,Y),Y.checked=t[19].deleteProfile,b(e,J),b(e,q),b(q,G),b(G,V),b(G,X),b(G,Z),Z.checked=t[19].teamQuery,b(e,tt),b(e,et),b(et,nt),b(nt,ot),b(nt,it),b(nt,rt),rt.checked=t[19].teamWebhook,b(e,st),b(e,ct),b(ct,at),b(e,lt),b(e,ut),b(ut,dt),b(e,ht),b(e,pt),b(pt,ft),b(e,mt),b(e,gt),b(gt,vt),b(e,yt),bt||(wt=[L(p,"change",kt),L($,"change",Mt),L(O,"change",_t),L(H,"change",Ct),L(Y,"change",Lt),L(Z,"change",It),L(rt,"change",St),L(dt,"click",Et),L(ft,"click",Tt),L(vt,"click",jt)],bt=!0)},p(e,n){t=e,1&n&&xt!==(xt=t[19].userId+"")&&S(o,xt),1&n&&c!==(c=t[19].userId)&&(s.value=c),1&n&&(p.checked=t[19].getProfile),1&n&&($.checked=t[19].saveFriendCode),1&n&&(O.checked=t[19].saveUsername),1&n&&(H.checked=t[19].saveDrip),1&n&&(Y.checked=t[19].deleteProfile),1&n&&(Z.checked=t[19].teamQuery),1&n&&(rt.checked=t[19].teamWebhook),1&n&&$t!==($t=t[19].nobot+"")&&S(at,$t)},d(t){t&&x(e),bt=!1,i(wt)}}}function Xt(t){let e,n,o,i,r,s,c,a,l,u,d,h,p,f,m=t[0].teamWebhookAllowed&&Zt(t);return{c(){e=k("div"),n=k("div"),o=k("form"),i=k("label"),i.textContent="Your Bot Key",r=_(),s=k("div"),c=k("input"),l=_(),u=k("span"),u.innerHTML='<button class="btn btn-default" type="button" id="copy-button" data-toggle="tooltip" data-placement="button" title="Copy to Clipboard"><i class="fa fa-copy"></i></button>',d=_(),h=k("div"),h.innerHTML='<form action="/settings/resetkey" method="post"><button class="btn btn-primary" type="submit" style="bottom:4px;position:absolute;"><i class="fa fa-refresh"></i></button></form>',p=_(),m&&m.c(),f=C(),I(i,"for","copy-input"),I(c,"type","text"),I(c,"class","form-control"),c.value=a=t[0].botKey,I(c,"id","copy-input"),c.readOnly=!0,I(u,"class","input-group-btn"),I(s,"class","input-group"),I(s,"onclick","copyToClipboard()"),I(n,"class","col-11"),I(h,"class","col-1"),I(e,"class","row"),T(e,"margin-top","14px")},m(a,g){w(a,e,g),b(e,n),b(n,o),b(o,i),b(o,r),b(o,s),b(s,c),t[17](c),b(s,l),b(s,u),b(e,d),b(e,h),w(a,p,g),m&&m.m(a,g),w(a,f,g)},p(t,e){1&e&&a!==(a=t[0].botKey)&&c.value!==a&&(c.value=a),t[0].teamWebhookAllowed?m?m.p(t,e):(m=Zt(t),m.c(),m.m(f.parentNode,f)):m&&(m.d(1),m=null)},d(n){n&&x(e),t[17](null),n&&x(p),m&&m.d(n),n&&x(f)}}}function Zt(t){let e,n,o,i,r,s,c,a,l;return{c(){e=k("form"),n=k("div"),o=k("div"),i=k("label"),i.textContent="Team Webhook",r=_(),s=k("input"),a=_(),l=k("div"),l.innerHTML='<div class="col"><button class="btn btn-primary" type="submit" style="float:right;">Save Webhook</button></div>',I(i,"for","copy-input"),I(s,"type","text"),I(s,"class","form-control"),I(s,"name","webhook"),s.value=c=t[0].teamWebhookUrl,I(s,"id","webhook"),I(s,"placeholder","Your webhook URL"),I(o,"class","col"),I(n,"class","row"),T(n,"margin-top","14px"),I(l,"class","row"),T(l,"margin-top","14px"),I(e,"action","/api/settings/saveteamwebhook"),I(e,"method","post"),I(e,"id","save-form")},m(t,c){w(t,e,c),b(e,n),b(n,o),b(o,i),b(o,r),b(o,s),b(e,a),b(e,l)},p(t,e){1&e&&c!==(c=t[0].teamWebhookUrl)&&s.value!==c&&(s.value=c)},d(t){t&&x(e)}}}function te(e){let n,o,i=e[0].isAdmin&&qt(e),r=e[0].botKey&&Xt(e);return{c(){n=k("div"),i&&i.c(),o=_(),r&&r.c(),I(n,"class","container")},m(t,e){w(t,n,e),i&&i.m(n,null),b(n,o),r&&r.m(n,null)},p(t,[e]){t[0].isAdmin?i?i.p(t,e):(i=qt(t),i.c(),i.m(n,o)):i&&(i.d(1),i=null),t[0].botKey?r?r.p(t,e):(r=Xt(t),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&x(n),i&&i.d(),r&&r.d()}}}function ee(t,e,n){let o,{userdata:i={}}=e,{location:r=""}=e,s={};async function c(t){const e=s.allbots.filter((e=>e.userId===t))[0];await(async t=>{await fetch("/api/settings/updatekey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})(e),window.location.href=window.location.href}async function a(t){await(async t=>{await fetch("/api/settings/resetkey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})})(t),window.location.href=window.location.href}async function l(t){await(async t=>{await fetch("/api/settings/revokekey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})})})(t),window.location.href=window.location.href}N((async()=>{n(0,s=await(async()=>(await fetch("/api/settings")).json())())}));return t.$$set=t=>{"userdata"in t&&n(5,i=t.userdata),"location"in t&&n(6,r=t.location)},[s,o,c,a,l,i,r,function(t,e){t[e].getProfile=this.checked,n(0,s)},function(t,e){t[e].saveFriendCode=this.checked,n(0,s)},function(t,e){t[e].saveUsername=this.checked,n(0,s)},function(t,e){t[e].saveDrip=this.checked,n(0,s)},function(t,e){t[e].deleteProfile=this.checked,n(0,s)},function(t,e){t[e].teamQuery=this.checked,n(0,s)},function(t,e){t[e].teamWebhook=this.checked,n(0,s)},async t=>await c(t.userId),async t=>await a(t.userId),async t=>await l(t.userId),function(t){R[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class ne extends st{constructor(t){super(),rt(this,t,ee,te,s,{userdata:5,location:6})}}function oe(e){let n;return{c(){n=k("div"),n.innerHTML='<img src="/css/img/nodrip.png" class="drip-pic" alt="no drip"/>',I(n,"class","drip-img")},m(t,e){w(t,n,e)},p:t,d(t){t&&x(n)}}}function ie(t){let e,n,o,i,r,s,c;return{c(){e=k("div"),e.innerHTML='<h3><a href="/"><i class="fa fa-chevron-left"></i></a>\n                        Your drip</h3>',n=_(),o=k("div"),i=k("img"),s=_(),c=k("form"),c.innerHTML='<button type="submit" value="submit"><i class="fa fa-close"></i></button>',l(i.src,r=t[0].drip)||I(i,"src",r),I(i,"class","drip-pic"),I(i,"alt","drip"),I(c,"action","/api/drip/delete"),I(c,"method","post"),I(c,"class","delete-drip"),I(o,"class","drip-img")},m(t,r){w(t,e,r),w(t,n,r),w(t,o,r),b(o,i),b(o,s),b(o,c)},p(t,e){1&e&&!l(i.src,r=t[0].drip)&&I(i,"src",r)},d(t){t&&x(e),t&&x(n),t&&x(o)}}}function re(e){let n,o,i;return{c(){n=k("input"),I(n,"id","image-input"),I(n,"name","drip"),I(n,"type","file"),I(n,"class","btn btn-primary"),I(n,"accept",".jpg,.png,image/jpeg,image/png"),T(n,"width","100%")},m(t,e){w(t,n,e),o||(i=L(n,"change",ae),o=!0)},p:t,d(t){t&&x(n),o=!1,i()}}}function se(e){let n,o,i;return{c(){n=k("h2"),n.textContent="Upload limit reached",o=_(),i=k("div"),i.textContent="Each user is allowed 3 uploads per week. The limit has been reached."},m(t,e){w(t,n,e),w(t,o,e),w(t,i,e)},p:t,d(t){t&&x(n),t&&x(o),t&&x(i)}}}function ce(e){let n,o,i,r,s,c,a,l,u,d,h,p,f,m,g,v;function y(t,e){return t[0].drip?ie:oe}let $=y(e),M=$(e);function C(t,e){return t[0].blockupload?se:re}let S=C(e),E=S(e);return{c(){n=k("div"),o=k("div"),i=k("div"),M.c(),r=_(),s=k("div"),c=k("div"),a=k("h3"),a.innerHTML='<a href="/"><i class="fa fa-chevron-left"></i></a>\n                    New drip',l=_(),u=k("button"),u.textContent="Save Changes",d=_(),h=k("div"),h.innerHTML='<img id="preview" class="drip-pic" alt="drip"/>',p=_(),f=k("div"),m=k("div"),E.c(),I(i,"class","col-12 col-md-6 offset-md-3"),I(i,"id","original-drip"),I(u,"type","button"),I(u,"class","btn btn-primary"),I(u,"id","upload-new-image"),T(u,"display","none"),T(u,"position","absolute"),T(u,"top","5px"),T(u,"right","15px"),I(h,"class","drip-img"),I(s,"class","col-12 col-md-6 offset-md-3"),I(s,"id","new-drip"),T(s,"display","none"),I(o,"class","row"),I(m,"class","col-12 col-md-6 offset-md-3"),I(f,"class","row"),I(n,"class","container")},m(t,e){w(t,n,e),b(n,o),b(o,i),M.m(i,null),b(o,r),b(o,s),b(s,c),b(c,a),b(c,l),b(c,u),b(s,d),b(s,h),b(n,p),b(n,f),b(f,m),E.m(m,null),g||(v=L(u,"click",le),g=!0)},p(t,[e]){$===($=y(t))&&M?M.p(t,e):(M.d(1),M=$(t),M&&(M.c(),M.m(i,null))),S===(S=C(t))&&E?E.p(t,e):(E.d(1),E=S(t),E&&(E.c(),E.m(m,null)))},i:t,o:t,d(t){t&&x(n),M.d(),E.d(),g=!1,v()}}}function ae(t){if(t.target.files){jQuery("#original-drip").hide(),jQuery("#new-drip").show(),jQuery("#upload-new-image").show();let n=t.target.files[0];var e=new FileReader;e.onload=function(t){var e=document.createElement("img");e.onload=function(t){var o=e.width,i=e.height;o>i?o>512&&(i*=512/o,o=512):i>512&&(o*=512/i,i=512);var r=document.createElement("canvas");r.width=o,r.height=i,r.getContext("2d").drawImage(e,0,0,o,i);var s=r.toDataURL(n.type);document.getElementById("preview").src=s},e.src=t.target.result},e.readAsDataURL(n)}}async function le(){var t=function(t){var e=";base64,";if(-1==t.indexOf(e)){var n=(i=t.split(","))[0].split(":")[1],o=i[1];return new Blob([o],{type:n})}n=(i=t.split(e))[0].split(":")[1];for(var i,r=(o=window.atob(i[1])).length,s=new Uint8Array(r),c=0;c<r;++c)s[c]=o.charCodeAt(c);return new Blob([s],{type:n})}(document.getElementById("preview").src),e=new FormData;e.append("drip",t),jQuery("#upload-new-image").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>  Loading...'),jQuery.ajax({url:"/api/drip/save",data:e,cache:!1,contentType:!1,processData:!1,type:"POST",success(){window.location.reload()},error(){alert("Upload failed"),window.location.reload()}})}function ue(t,e,n){let{userdata:o={}}=e,{location:i=""}=e,r={};return N((async()=>{n(0,r=await(async()=>(await fetch("/api/drip")).json())())})),t.$$set=t=>{"userdata"in t&&n(1,o=t.userdata),"location"in t&&n(2,i=t.location)},[r,o,i]}class de extends st{constructor(t){super(),rt(this,t,ue,ce,s,{userdata:1,location:2})}}function he(t){return Array.isArray?Array.isArray(t):"[object Array]"===be(t)}function pe(t){return"string"==typeof t}function fe(t){return"number"==typeof t}function me(t){return!0===t||!1===t||function(t){return ge(t)&&null!==t}(t)&&"[object Boolean]"==be(t)}function ge(t){return"object"==typeof t}function ve(t){return null!=t}function ye(t){return!t.trim().length}function be(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const we=Object.prototype.hasOwnProperty;class xe{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=$e(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function $e(t){let e=null,n=null,o=null,i=1;if(pe(t)||he(t))o=t,e=ke(t),n=Me(t);else{if(!we.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const r=t.name;if(o=r,we.call(t,"weight")&&(i=t.weight,i<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(r));e=ke(r),n=Me(r)}return{path:e,id:n,weight:i,src:o}}function ke(t){return he(t)?t:t.split(".")}function Me(t){return he(t)?t.join("."):t}var _e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],o=!1;const i=(t,e,r)=>{if(ve(t))if(e[r]){const s=t[e[r]];if(!ve(s))return;if(r===e.length-1&&(pe(s)||fe(s)||me(s)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(s));else if(he(s)){o=!0;for(let t=0,n=s.length;t<n;t+=1)i(s[t],e,r+1)}else e.length&&i(s,e,r+1)}else n.push(t)};return i(t,pe(e)?e.split("."):e,0),o?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Ce=/[^ ]+/g;class Le{constructor({getFn:t=_e.getFn,fieldNormWeight:e=_e.fieldNormWeight}={}){this.norm=function(t=1,e=3){const n=new Map,o=Math.pow(10,e);return{get(e){const i=e.match(Ce).length;if(n.has(i))return n.get(i);const r=1/Math.pow(i,.5*t),s=parseFloat(Math.round(r*o)/o);return n.set(i,s),s},clear(){n.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,pe(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();pe(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!ve(t)||ye(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,o)=>{let i=this.getFn(t,e.path);if(ve(i))if(he(i)){let t=[];const e=[{nestedArrIndex:-1,value:i}];for(;e.length;){const{nestedArrIndex:n,value:o}=e.pop();if(ve(o))if(pe(o)&&!ye(o)){let e={v:o,i:n,n:this.norm.get(o)};t.push(e)}else he(o)&&o.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[o]=t}else if(!ye(i)){let t={v:i,n:this.norm.get(i)};n.$[o]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ie(t,e,{getFn:n=_e.getFn,fieldNormWeight:o=_e.fieldNormWeight}={}){const i=new Le({getFn:n,fieldNormWeight:o});return i.setKeys(t.map($e)),i.setSources(e),i.create(),i}function Se(t,{errors:e=0,currentLocation:n=0,expectedLocation:o=0,distance:i=_e.distance,ignoreLocation:r=_e.ignoreLocation}={}){const s=e/t.length;if(r)return s;const c=Math.abs(o-n);return i?s+c/i:c?1:s}const Ee=32;function Te(t,e,n,{location:o=_e.location,distance:i=_e.distance,threshold:r=_e.threshold,findAllMatches:s=_e.findAllMatches,minMatchCharLength:c=_e.minMatchCharLength,includeMatches:a=_e.includeMatches,ignoreLocation:l=_e.ignoreLocation}={}){if(e.length>Ee)throw new Error(`Pattern length exceeds max of ${Ee}.`);const u=e.length,d=t.length,h=Math.max(0,Math.min(o,d));let p=r,f=h;const m=c>1||a,g=m?Array(d):[];let v;for(;(v=t.indexOf(e,f))>-1;){let t=Se(e,{currentLocation:v,expectedLocation:h,distance:i,ignoreLocation:l});if(p=Math.min(t,p),f=v+u,m){let t=0;for(;t<u;)g[v+t]=1,t+=1}}f=-1;let y=[],b=1,w=u+d;const x=1<<u-1;for(let o=0;o<u;o+=1){let r=0,c=w;for(;r<c;){Se(e,{errors:o,currentLocation:h+c,expectedLocation:h,distance:i,ignoreLocation:l})<=p?r=c:w=c,c=Math.floor((w-r)/2+r)}w=c;let a=Math.max(1,h-c+1),v=s?d:Math.min(h+c,d)+u,$=Array(v+2);$[v+1]=(1<<o)-1;for(let r=v;r>=a;r-=1){let s=r-1,c=n[t.charAt(s)];if(m&&(g[s]=+!!c),$[r]=($[r+1]<<1|1)&c,o&&($[r]|=(y[r+1]|y[r])<<1|1|y[r+1]),$[r]&x&&(b=Se(e,{errors:o,currentLocation:s,expectedLocation:h,distance:i,ignoreLocation:l}),b<=p)){if(p=b,f=s,f<=h)break;a=Math.max(1,2*h-f)}}if(Se(e,{errors:o+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:l})>p)break;y=$}const $={isMatch:f>=0,score:Math.max(.001,b)};if(m){const t=function(t=[],e=_e.minMatchCharLength){let n=[],o=-1,i=-1,r=0;for(let s=t.length;r<s;r+=1){let s=t[r];s&&-1===o?o=r:s||-1===o||(i=r-1,i-o+1>=e&&n.push([o,i]),o=-1)}return t[r-1]&&r-o>=e&&n.push([o,r-1]),n}(g,c);t.length?a&&($.indices=t):$.isMatch=!1}return $}function je(t){let e={};for(let n=0,o=t.length;n<o;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<o-n-1}return e}class Ae{constructor(t,{location:e=_e.location,threshold:n=_e.threshold,distance:o=_e.distance,includeMatches:i=_e.includeMatches,findAllMatches:r=_e.findAllMatches,minMatchCharLength:s=_e.minMatchCharLength,isCaseSensitive:c=_e.isCaseSensitive,ignoreLocation:a=_e.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:a},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:je(t),startIndex:e})},u=this.pattern.length;if(u>Ee){let t=0;const e=u%Ee,n=u-e;for(;t<n;)l(this.pattern.substr(t,Ee),t),t+=Ee;if(e){const t=u-Ee;l(this.pattern.substr(t),t)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:o,distance:i,threshold:r,findAllMatches:s,minMatchCharLength:c,ignoreLocation:a}=this.options;let l=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:p})=>{const{isMatch:f,score:m,indices:g}=Te(t,e,h,{location:o+p,distance:i,threshold:r,findAllMatches:s,minMatchCharLength:c,includeMatches:n,ignoreLocation:a});f&&(d=!0),u+=m,f&&g&&(l=[...l,...g])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=l),h}}class Ne{constructor(t){this.pattern=t}static isMultiMatch(t){return Oe(t,this.multiRegex)}static isSingleMatch(t){return Oe(t,this.singleRegex)}search(){}}function Oe(t,e){const n=t.match(e);return n?n[1]:null}class Pe extends Ne{constructor(t,{location:e=_e.location,threshold:n=_e.threshold,distance:o=_e.distance,includeMatches:i=_e.includeMatches,findAllMatches:r=_e.findAllMatches,minMatchCharLength:s=_e.minMatchCharLength,isCaseSensitive:c=_e.isCaseSensitive,ignoreLocation:a=_e.ignoreLocation}={}){super(t),this._bitapSearch=new Ae(t,{location:e,threshold:n,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Fe extends Ne{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const o=[],i=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+i,o.push([e,n-1]);const r=!!o.length;return{isMatch:r,score:r?0:1,indices:o}}}const Re=[class extends Ne{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Fe,class extends Ne{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends Ne{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Ne{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Ne{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends Ne{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Pe],Ue=Re.length,De=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const He=new Set([Pe.type,Fe.type]);class We{constructor(t,{isCaseSensitive:e=_e.isCaseSensitive,includeMatches:n=_e.includeMatches,minMatchCharLength:o=_e.minMatchCharLength,ignoreLocation:i=_e.ignoreLocation,findAllMatches:r=_e.findAllMatches,location:s=_e.location,threshold:c=_e.threshold,distance:a=_e.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:o,findAllMatches:r,ignoreLocation:i,location:s,threshold:c,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(De).filter((t=>t&&!!t.trim())),o=[];for(let t=0,i=n.length;t<i;t+=1){const i=n[t];let r=!1,s=-1;for(;!r&&++s<Ue;){const t=Re[s];let n=t.isMultiMatch(i);n&&(o.push(new t(n,e)),r=!0)}if(!r)for(s=-1;++s<Ue;){const t=Re[s];let n=t.isSingleMatch(i);if(n){o.push(new t(n,e));break}}}return o}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let i=0,r=[],s=0;for(let o=0,c=e.length;o<c;o+=1){const c=e[o];r.length=0,i=0;for(let e=0,o=c.length;e<o;e+=1){const o=c[e],{isMatch:a,indices:l,score:u}=o.search(t);if(!a){s=0,i=0,r.length=0;break}if(i+=1,s+=u,n){const t=o.constructor.type;He.has(t)?r=[...r,...l]:r.push(l)}}if(i){let t={isMatch:!0,score:s/i};return n&&(t.indices=r),t}}return{isMatch:!1,score:1}}}const Qe=[];function Ke(t,e){for(let n=0,o=Qe.length;n<o;n+=1){let o=Qe[n];if(o.condition(t,e))return new o(t,e)}return new Ae(t,e)}const Be="$and",ze="$or",Ye="$path",Je="$val",qe=t=>!(!t[Be]&&!t[ze]),Ge=t=>({[Be]:Object.keys(t).map((e=>({[e]:t[e]})))});function Ve(t,e,{auto:n=!0}={}){const o=t=>{let i=Object.keys(t);const r=(t=>!!t[Ye])(t);if(!r&&i.length>1&&!qe(t))return o(Ge(t));if((t=>!he(t)&&ge(t)&&!qe(t))(t)){const o=r?t[Ye]:i[0],s=r?t[Je]:t[o];if(!pe(s))throw new Error((t=>`Invalid value for key ${t}`)(o));const c={keyId:Me(o),pattern:s};return n&&(c.searcher=Ke(s,e)),c}let s={children:[],operator:i[0]};return i.forEach((e=>{const n=t[e];he(n)&&n.forEach((t=>{s.children.push(o(t))}))})),s};return qe(t)||(t=Ge(t)),o(t)}function Xe(t,e){const n=t.matches;e.matches=[],ve(n)&&n.forEach((t=>{if(!ve(t.indices)||!t.indices.length)return;const{indices:n,value:o}=t;let i={indices:n,value:o};t.key&&(i.key=t.key.src),t.idx>-1&&(i.refIndex=t.idx),e.matches.push(i)}))}function Ze(t,e){e.score=t.score}class tn{constructor(t,e={},n){this.options={..._e,...e},this.options.useExtendedSearch,this._keyStore=new xe(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Le))throw new Error("Incorrect 'index' type");this._myIndex=e||Ie(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ve(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,o=this._docs.length;n<o;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,o-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:i,sortFn:r,ignoreFieldNorm:s}=this.options;let c=pe(t)?pe(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=_e.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:o,score:i})=>{const r=t?t.weight:null;n*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(e?1:o))})),t.score=n}))}(c,{ignoreFieldNorm:s}),i&&c.sort(r),fe(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=_e.includeMatches,includeScore:o=_e.includeScore}={}){const i=[];return n&&i.push(Xe),o&&i.push(Ze),t.map((t=>{const{idx:n}=t,o={item:e[n],refIndex:n};return i.length&&i.forEach((e=>{e(t,o)})),o}))}(c,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(t){const e=Ke(t,this.options),{records:n}=this._myIndex,o=[];return n.forEach((({v:t,i:n,n:i})=>{if(!ve(t))return;const{isMatch:r,score:s,indices:c}=e.searchIn(t);r&&o.push({item:t,idx:n,matches:[{score:s,value:t,norm:i,indices:c}]})})),o}_searchLogical(t){const e=Ve(t,this.options),n=(t,e,o)=>{if(!t.children){const{keyId:n,searcher:i}=t,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:i});return r&&r.length?[{idx:o,item:e,matches:r}]:[]}const i=[];for(let r=0,s=t.children.length;r<s;r+=1){const s=t.children[r],c=n(s,e,o);if(c.length)i.push(...c);else if(t.operator===Be)return[]}return i},o=this._myIndex.records,i={},r=[];return o.forEach((({$:t,i:o})=>{if(ve(t)){let s=n(e,t,o);s.length&&(i[o]||(i[o]={idx:o,item:t,matches:[]},r.push(i[o])),s.forEach((({matches:t})=>{i[o].matches.push(...t)})))}})),r}_searchObjectList(t){const e=Ke(t,this.options),{keys:n,records:o}=this._myIndex,i=[];return o.forEach((({$:t,i:o})=>{if(!ve(t))return;let r=[];n.forEach(((n,o)=>{r.push(...this._findMatches({key:n,value:t[o],searcher:e}))})),r.length&&i.push({idx:o,item:t,matches:r})})),i}_findMatches({key:t,value:e,searcher:n}){if(!ve(e))return[];let o=[];if(he(e))e.forEach((({v:e,i:i,n:r})=>{if(!ve(e))return;const{isMatch:s,score:c,indices:a}=n.searchIn(e);s&&o.push({score:c,key:t,value:e,idx:i,norm:r,indices:a})}));else{const{v:i,n:r}=e,{isMatch:s,score:c,indices:a}=n.searchIn(i);s&&o.push({score:c,key:t,value:i,norm:r,indices:a})}return o}}function en(t,e,n){const o=t.slice();return o[17]=e[n],o}function nn(t,e,n){const o=t.slice();return o[20]=e[n],o}function on(t){let e,n,o,r,s,c,a,l,u,d,h,p,f,m,g,v,y,$,C,S,j,A,N,O=t[1]&&t[1].filter(t[10]).length<10,P=O&&rn(t);function F(t,e){return t[1]?cn:sn}let R=F(t),U=R(t);return{c(){e=k("div"),P&&P.c(),n=_(),o=k("div"),r=k("div"),s=k("h3"),s.textContent="Pick a Template",c=_(),a=k("div"),l=k("div"),u=k("label"),d=M("Just my templates \r\n                        "),h=k("input"),p=_(),f=k("span"),m=_(),g=k("div"),v=k("div"),y=k("label"),y.textContent="Search",$=_(),C=k("input"),S=_(),j=k("div"),U.c(),I(h,"type","checkbox"),I(h,"class","svelte-aj5kgd"),I(f,"class","checkmark svelte-aj5kgd"),I(u,"class","checkbox-container svelte-aj5kgd"),I(l,"class","col"),I(a,"class","row no-gutters"),I(y,"for","search"),I(C,"type","text"),I(C,"class","form-control"),I(v,"class","col"),I(g,"class","row no-gutters"),I(j,"class","row no-gutters"),I(r,"class","col"),I(o,"class","row"),T(o,"margin-top","14px"),I(e,"class","container")},m(i,x){w(i,e,x),P&&P.m(e,null),b(e,n),b(e,o),b(o,r),b(r,s),b(r,c),b(r,a),b(a,l),b(l,u),b(u,d),b(u,h),h.checked=t[2],b(u,p),b(u,f),b(r,m),b(r,g),b(g,v),b(v,y),b(v,$),b(v,C),E(C,t[4]),b(r,S),b(r,j),U.m(j,null),A||(N=[L(h,"change",t[11]),L(C,"input",t[12]),L(C,"input",t[6])],A=!0)},p(t,o){3&o&&(O=t[1]&&t[1].filter(t[10]).length<10),O?P?P.p(t,o):(P=rn(t),P.c(),P.m(e,n)):P&&(P.d(1),P=null),4&o&&(h.checked=t[2]),16&o&&C.value!==t[4]&&E(C,t[4]),R===(R=F(t))&&U?U.p(t,o):(U.d(1),U=R(t),U&&(U.c(),U.m(j,null)))},d(t){t&&x(e),P&&P.d(),U.d(),A=!1,i(N)}}}function rn(t){let e,n,o,i,r,s,c,a,l,u,d,h;return{c(){e=k("div"),n=k("div"),o=k("h3"),o.textContent="Create a template",i=_(),r=k("form"),s=k("div"),s.innerHTML='<div class="col-12 col-md-4"><label for="name">Name</label> \n                        <input type="text" class="form-control" name="name" maxlength="20"/></div> \n                    <div class="col-12 col-md-8"><label for="name">Search Terms</label> \n                        <input type="text" class="form-control" name="searchTerms" maxlength="70"/></div>',c=_(),a=k("div"),a.innerHTML='<div class="col-12 col-md-6"><label for="name">Friend Code Color</label> \n                        <input type="color" class="form-control" name="friendcodecolor"/></div> \n                    <div class="col-12 col-md-6"><label for="name">Name Color</label> \n                        <input type="color" class="form-control" name="namecolor"/></div>',l=_(),u=k("div"),u.innerHTML='<div class="col-12 col-md-6"><label for="img">Template</label> \n                        <div><input type="file" name="img"/></div></div> \n                    <div class="col-12 col-md-6" style="position:relative;"><div class="save-new svelte-aj5kgd"><button type="submit" class="btn btn-primary">Save</button></div></div>',d=_(),h=k("input"),I(s,"class","row"),I(a,"class","row"),I(u,"class","row"),I(h,"type","hidden"),I(h,"name","slot"),h.value=t[5],I(r,"action","/api/templates/save"),I(r,"method","post"),I(r,"enctype","multipart/form-data"),I(n,"class","col"),I(e,"class","row")},m(t,p){w(t,e,p),b(e,n),b(n,o),b(n,i),b(n,r),b(r,s),b(r,c),b(r,a),b(r,l),b(r,u),b(r,d),b(r,h)},p(t,e){32&e&&(h.value=t[5])},d(t){t&&x(e)}}}function sn(e){let n;return{c(){n=k("div"),n.textContent="You don't have any templates",I(n,"class","col")},m(t,e){w(t,n,e)},p:t,d(t){t&&x(n)}}}function cn(t){let e,n=t[3].filter(t[13]),o=[];for(let e=0;e<n.length;e+=1)o[e]=dn(en(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);w(t,e,n)},p(t,i){if(397&i){let r;for(n=t[3].filter(t[13]),r=0;r<n.length;r+=1){const s=en(t,n,r);o[r]?o[r].p(s,i):(o[r]=dn(s),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){$(o,t),t&&x(e)}}}function an(t){let e,n,o=t[20]+"";return{c(){e=k("div"),n=M(o),I(e,"class","term svelte-aj5kgd")},m(t,o){w(t,e,o),b(e,n)},p(t,e){13&e&&o!==(o=t[20]+"")&&S(n,o)},d(t){t&&x(e)}}}function ln(t){let e,n=t[20]&&an(t);return{c(){n&&n.c(),e=C()},m(t,o){n&&n.m(t,o),w(t,e,o)},p(t,o){t[20]?n?n.p(t,o):(n=an(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&x(e)}}}function un(t){let e,n,o,i,r;function s(){return t[15](t[17])}return{c(){e=k("div"),n=k("div"),o=k("button"),o.textContent="Delete",I(o,"type","button"),I(o,"class","btn btn-danger"),T(o,"width","100%"),I(n,"class","col"),T(n,"position","relative"),T(n,"margin","12px"),I(e,"class","row")},m(t,c){w(t,e,c),b(e,n),b(n,o),i||(r=L(o,"click",s),i=!0)},p(e,n){t=e},d(t){t&&x(e),i=!1,r()}}}function dn(t){let e,n,o,i,r,s,c,a,u,d,h,p,f,m,g,v,y,C,E,j,A,N,O,P,F,R,U,D=t[17].name+"",H=t[17].keywords.split(" "),W=[];for(let e=0;e<H.length;e+=1)W[e]=ln(nn(t,H,e));function Q(){return t[14](t[17])}let K=t[17].userId===t[0].id&&un(t);return{c(){e=k("div"),n=k("div"),o=k("div"),i=k("div"),r=k("h5"),s=M(D),c=_(),a=k("button"),u=k("img"),h=_(),p=k("div"),f=k("div"),m=k("input"),v=M("\r\n                                    Friend Code"),y=_(),C=k("div"),E=k("input"),A=M("\r\n                                    Name"),N=_(),O=k("div");for(let t=0;t<W.length;t+=1)W[t].c();P=_(),K&&K.c(),F=_(),I(i,"class","col-12 no-gutters"),I(o,"class","row no-gutters"),l(u.src,d=t[17].url)||I(u,"src",d),I(u,"alt","template"),T(u,"width","100%"),I(m,"class","color-display svelte-aj5kgd"),I(m,"type","color"),m.readOnly=!0,m.value=g=t[17].color_friendcode,T(f,"text-align","left"),I(f,"class","col"),I(E,"class","color-display svelte-aj5kgd"),I(E,"type","color"),E.readOnly=!0,E.value=j=t[17].color_name,T(C,"text-align","left"),I(C,"class","col"),I(p,"class","row"),I(O,"class","search-terms svelte-aj5kgd"),I(a,"type","btn btn-primary"),I(a,"class","template-choice svelte-aj5kgd"),I(n,"class","floating-card mdc-elevation--z20 svelte-aj5kgd"),I(e,"class","col-12 col-md-4"),T(e,"position","relative")},m(t,l){w(t,e,l),b(e,n),b(n,o),b(o,i),b(i,r),b(r,s),b(n,c),b(n,a),b(a,u),b(a,h),b(a,p),b(p,f),b(f,m),b(f,v),b(p,y),b(p,C),b(C,E),b(C,A),b(a,N),b(a,O);for(let t=0;t<W.length;t+=1)W[t].m(O,null);b(n,P),K&&K.m(n,null),b(e,F),R||(U=L(a,"click",Q),R=!0)},p(e,o){if(t=e,13&o&&D!==(D=t[17].name+"")&&S(s,D),13&o&&!l(u.src,d=t[17].url)&&I(u,"src",d),13&o&&g!==(g=t[17].color_friendcode)&&(m.value=g),13&o&&j!==(j=t[17].color_name)&&(E.value=j),13&o){let e;for(H=t[17].keywords.split(" "),e=0;e<H.length;e+=1){const n=nn(t,H,e);W[e]?W[e].p(n,o):(W[e]=ln(n),W[e].c(),W[e].m(O,null))}for(;e<W.length;e+=1)W[e].d(1);W.length=H.length}t[17].userId===t[0].id?K?K.p(t,o):(K=un(t),K.c(),K.m(n,null)):K&&(K.d(1),K=null)},d(t){t&&x(e),$(W,t),K&&K.d(),R=!1,U()}}}function hn(e){let n,o=e[0]&&on(e);return{c(){o&&o.c(),n=C()},m(t,e){o&&o.m(t,e),w(t,n,e)},p(t,[e]){t[0]?o?o.p(t,e):(o=on(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&x(n)}}}function pn(t,e,n){let o,{userdata:i={}}=e,{setTemplate:r=(t=>{})}=e,s=null,c=!1,a=null,l="",u=0;function d(t){r(t),ft("/")}async function h(t,e){confirm(`Are you sure you wish to delete the template ${t}?  This action cannot be undone.`)&&(await(async t=>{await fetch("/api/templates/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot:t})})})(e),window.location.reload())}N((async()=>{n(1,s=await(async t=>{let e=new URL(window.location.origin+"/api/templates/all");return e.search=new URLSearchParams({q:t}),(await fetch(e)).json()})()),n(1,s=s.sort(((t,e)=>t.userId===i.id&&e.userId===i.id||t.userId!==i.id&&e.userId!==i.id?0:t.userId===i.id?-1:1))),n(3,a=s);o=new tn(s,{shouldSort:!0,threshold:.4,keys:["name","keywords"]}),s.filter((t=>t.userId===i.id)).sort(((t,e)=>parseInt(t.slot)>parseInt(e.slot)?1:-1)).forEach((t=>u===parseInt(t.slot)&&n(5,u++,u)))}));return t.$$set=t=>{"userdata"in t&&n(0,i=t.userdata),"setTemplate"in t&&n(9,r=t.setTemplate)},[i,s,c,a,l,u,function(){n(3,a=l?o.search(l).map((t=>t.item)):s)},d,h,r,t=>t.userId===i.id,function(){c=this.checked,n(2,c)},function(){l=this.value,n(4,l)},t=>!c||t.userId===i.id,t=>d(t.id),async t=>await h(t.name,t.slot)]}tn.version="6.5.3",tn.createIndex=Ie,tn.parseIndex=function(t,{getFn:e=_e.getFn,fieldNormWeight:n=_e.fieldNormWeight}={}){const{keys:o,records:i}=t,r=new Le({getFn:e,fieldNormWeight:n});return r.setKeys(o),r.setIndexRecords(i),r},tn.config=_e,tn.parseQuery=Ve,function(...t){Qe.push(...t)}(We);class fn extends st{constructor(t){super(),rt(this,t,pn,hn,s,{userdata:0,setTemplate:9})}}function mn(t){let e,n,o,r,s,c,a,u,d,h,p,f,m,g,v,$,C,S;return{c(){e=k("div"),n=k("div"),n.innerHTML='<div style="height:70px;width:1px;"></div> \n\t\t\t\t\t\t<div class="item"><a href="/settings">Settings</a></div> \n\t\t\t\t\t\t<div class="item"><form action="/api/delete" method="post"><input type="hidden" name="delete" value="YES"/> \n\t\t\t\t\t\t\t\t<a href="/" onclick="$(this).closest(&#39;form&#39;).submit();return false;">Delete Profile</a></form></div> \n\t\t\t\t\t\t<div class="item"><a href="/logout">Logout</a></div>',o=_(),r=k("img"),c=_(),a=k("a"),a.textContent="Home",d=_(),h=k("a"),p=M("Profile"),g=_(),v=k("a"),v.textContent="Templates",I(n,"class","usermenu"),T(n,"display","none"),l(r.src,s=t[1].avatar)||I(r,"src",s),I(r,"alt","avatar"),I(e,"id","userinfo"),I(a,"class","btn btn-primary"),I(a,"href","/"),I(a,"role","button"),I(h,"class","btn btn-primary"),I(h,"href",f="/p/"+t[1].profileId),I(h,"role","button"),I(v,"class","btn btn-primary"),I(v,"href","/templates"),I(v,"role","button")},m(i,s){w(i,e,s),b(e,n),b(e,o),b(e,r),w(i,c,s),w(i,a,s),w(i,d,s),w(i,h,s),b(h,p),w(i,g,s),w(i,v,s),C||(S=[L(r,"click",t[2]),y(u=At.call(null,a)),y(m=At.call(null,h)),y($=At.call(null,v))],C=!0)},p(t,e){2&e&&!l(r.src,s=t[1].avatar)&&I(r,"src",s),2&e&&f!==(f="/p/"+t[1].profileId)&&I(h,"href",f)},d(t){t&&x(e),t&&x(c),t&&x(a),t&&x(d),t&&x(h),t&&x(g),t&&x(v),C=!1,i(S)}}}function gn(t){let e,n,o,i,r,s,c,a,l,u;return e=new jt({props:{path:"/templates",component:fn,userdata:t[1],setTemplate:t[3]}}),o=new jt({props:{path:"/drip",component:de,userdata:t[1]}}),r=new jt({props:{path:"/settings",component:ne,userdata:t[1]}}),c=new jt({props:{path:"/p/:profileId",component:Yt}}),l=new jt({props:{path:"*",component:Wt,userdata:t[1]}}),{c(){et(e.$$.fragment),n=_(),et(o.$$.fragment),i=_(),et(r.$$.fragment),s=_(),et(c.$$.fragment),a=_(),et(l.$$.fragment)},m(t,d){nt(e,t,d),w(t,n,d),nt(o,t,d),w(t,i,d),nt(r,t,d),w(t,s,d),nt(c,t,d),w(t,a,d),nt(l,t,d),u=!0},p(t,n){const i={};2&n&&(i.userdata=t[1]),e.$set(i);const s={};2&n&&(s.userdata=t[1]),o.$set(s);const c={};2&n&&(c.userdata=t[1]),r.$set(c);const a={};2&n&&(a.userdata=t[1]),l.$set(a)},i(t){u||(X(e.$$.fragment,t),X(o.$$.fragment,t),X(r.$$.fragment,t),X(c.$$.fragment,t),X(l.$$.fragment,t),u=!0)},o(t){Z(e.$$.fragment,t),Z(o.$$.fragment,t),Z(r.$$.fragment,t),Z(c.$$.fragment,t),Z(l.$$.fragment,t),u=!1},d(t){ot(e,t),t&&x(n),ot(o,t),t&&x(i),ot(r,t),t&&x(s),ot(c,t),t&&x(a),ot(l,t)}}}function vn(t){let e,n,o,i,r,s,c,a,l=t[1].id&&mn(t);return c=new Mt({props:{url:t[0],$$slots:{default:[gn]},$$scope:{ctx:t}}}),{c(){e=k("main"),n=k("div"),o=k("div"),i=k("div"),i.innerHTML='<a href="https://discord.gg/rsplatoon" target="_blank"><img class="center-block" src="/css/img/logo.png" style="width:300px;height:auto;margin-top:0" alt="logo"/></a> \n\t\t\t\t<h1>Profile</h1>',r=_(),l&&l.c(),s=_(),et(c.$$.fragment),I(o,"class","jumbotron"),I(n,"class","container"),T(n,"margin-bottom","100px"),T(n,"padding-left","0"),T(n,"padding-right","0")},m(t,u){w(t,e,u),b(e,n),b(n,o),b(o,i),b(o,r),l&&l.m(o,null),b(n,s),nt(c,n,null),a=!0},p(t,[e]){t[1].id?l?l.p(t,e):(l=mn(t),l.c(),l.m(o,null)):l&&(l.d(1),l=null);const n={};1&e&&(n.url=t[0]),18&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n)},i(t){a||(X(c.$$.fragment,t),a=!0)},o(t){Z(c.$$.fragment,t),a=!1},d(t){t&&x(e),l&&l.d(),ot(c)}}}function yn(t,e,n){let{url:o=""}=e,i={};N((async()=>n(1,i=await(async()=>(await fetch("/api/user")).json())())));return t.$$set=t=>{"url"in t&&n(0,o=t.url)},[o,i,()=>jQuery(".usermenu").slideToggle(),t=>{n(1,i.template=t,i)}]}return new class extends st{constructor(t){super(),rt(this,t,yn,vn,s,{url:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
